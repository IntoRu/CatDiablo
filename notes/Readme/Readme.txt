
Урон от меча прописан в PlayerStateFree()
отрисовка меча в интерфейсе происходит в oUI draw UI
----------------------------------------------------------



----------------------------------------------------
		ЗАМЕТКА ПО СОХРАНЕНИЮ И ЗАГРУЗКИ ДАННЫХ
все переменные которые сохраняются и загружаются должны быть обязательно прописанны в oGame

--------------------------------------------
СИСТЕМА ОСВЕЩЕНИЯ (НА ВЕТКЕ LIGHTSYSTEM)
взято от сюда https://gamemaker.io/ru/tutorials/coffee-break-tutorial-simple-lighting-gml
папка LightSystem
главный обьект oLighting и oLightingStatil
в комнате где нужно освещение создаём новый слой на верху (если чё смотрим глубину)
(в открытых делаем oLighting а в закрытых oLightingStatik там всегда темно. такие как дома и пещеры
в закрытых также в этом обьекте есть изменяемая переменная темноты и в открытом тоже есть максимальная темнота
можно на разных картах по разному регулировать)
туда ставим обьект освещения(в переменных есть область распространения и интенсивность света)
создаём обьект родителя освещения и добавляем детей которые могут святится игрок pEntyti
в обьекте освещения в свиче прописываем обьекты которые будут святится
В oLighting есть параметры продолжительности дня и ночи
и того что бы отключить освещение достаточно убрать обьект oLighting c карты со слоя Lighting



-----------------------------------------------------
создан уникальный камень oRockStrongDamage . логика урона прописана в pEnemy
урон в самом камне
------------------------------------------
РЕАЛИЗОВАНА НОВАЯ ТЕМА(ТРАВА И ПЕРВЫЙ БОСС ЧЕРВЯК)
Вы также можете легко добавить эффект замедления с помощью растений! Добавьте новую 
переменную с именем 'entitySlow' или что-то в этом роде. Я буду использовать entitySlow. Затем 
добавьте эту строку к вашему горизонтальному столкновению после оператора if entityCollision. } else if 
(_entityCheck.entitySlow == true) { hSpeed ​​/= 2;} Скопируйте и вставьте это в ваше вертикальное 
столкновение и измените hSpeed ​​на vSpeed. Перейдите в oPlant и oPlantB и измените их entityCollision 
на false, а entitySlow на true. Теперь подойдите к растению и посмотрите, как растения замедляют 
вашего игрока! Это дает больше причин бить растения :)
--------------------------------------------------------
Добавлена функция правильного поворота игрока из комнаты в комнату
настраивается на карте в обьектах oRoomExit
------------------------------------------------------
ЕЩЁ ОДНА СУПЕР ТЕМА ИЗВЛЕЧЕНИЕ ДАННЫХ В ФАЙЛЕ
пример механики прописана в PlayerStateDeath(появляемся в комнате последнего сохранения)
----------------------------------------
Добавление предметов
добавляем кадр в конец спрайта UI
в макросах прописываем предмет(порядок в кадрах и макросах должен быть единым)
в oGame Create прописываем предмет по аналогии с другими
в PlayerStateFree обозначаем функцию ее использования и создаём ее в соответствующем разделе по аналогии
далее создаём спрайт и объект ...drop по аналогии и в ее переменных прописываем сбор и кол-во

---------------------------------------
РЕАЛИЗОВАНА ФИШКА С УРОНОМ ПРИ ПЕРЕКАТЕ ЕСЛИ ЕСТЬ ЩИТ
----------------------------------
всякие предметы на карте делаем с помощью обьектов детьми pEntity. ставим коллизию и всё ок
ну и маску коллизии не забываем подстраивать
нагдядная демонстрация на карте лес деревья
--------------------------------
в папке НПС есть oFriend. Это такой же нпс толко он двигается.
	в параметрах можно задавать дистанцию и скорость.
	так же с ним тоже можно пиздеть и делать квесты
-------------------------------------
В скрипте RoomToArenaName список локаций с их названием
не забываем прописовать при создании новой локации
--------------------------------------------
в MACROS прописана начальнаяя лока
----------------------------------- 
при смерти игрок теряет треть монет(если их болше 10)
прописано в PlayerStateDead
-------------------------------------
 
 АХУЕННАЯ ТЕМА
		САМ ПРИДУМАЛ
В oUI в step case 3 прописал как начать новую игру
---------------------------------------------------

// НОВАЯ ДИАЛОГАВАЯ ТЕМА
- в oGame создаём лист квеста
- в ActiveHat активируем и прописываем диалоги со всеми вытекающими
- в DialogueResponses прописываем варианты оветов
- на карте в нпс в переменных в EntityActiveScript прописываем ActivateHatCat ()
	EntityActiveArg оставляем по умолчанию [-1]
-------------------------------------------------------------------------------
РЕШЕНИЕ КОТОРОЕ Я ДОЛГО ЖДАЛ
теперь ничего не спавнится если уничтожено при переходе из в комнату в комнату
идея взята отсюда https://www.youtube.com/watch?v=mvuVUnmt6S4
- в oGame Create создаём список уничтожаемых обьектов global.testDeath
- в pEntyty (родительский обьект для всего что можно уничтожить)
  в Destroy записываем айдишник того что уничтожили в этот лист
- в oGame Room Start через цикл фор уничтожаем все значения из этого списка
	а в событии Game End уничтожаем сам список
	
	ЗАМЕНЕНО НА МАССИВ А НЕ СПИСОК (он автоматом удаляется сборщиком мусора)


Главное спрайты должны иметь одинаковое кол-во кадров для всех направлений
--------------------------------------------------------------------------------------
Уровень персоонажа
	уровень задействует машину состояний
	взято от сюда    https://www.youtube.com/watch?v=2QtxSfxA7s4&t=412s
	в обьекте oGame Create в уровне прописываем в массив урон и здоровье и другие важные характеристики
	сам уровень присваивается переменной level
	В зависимости от уровня автоматически повышается скорость аттаки мечом
	(он зависит и настраевается в редакторе спрайтов - скорость анимации)
	
	сама логика урона и отброса врага прописана в PlayerAttackFunction
	
	
	в создании плеера есть параметр времени неуязвимости при получении урона
--------------------------------------------------------------------------------------------------
Пробел - активировать что либо
Shift - атака
Control - предмет
R - перезапуск игры
ESC - пауза
--------------------------------------------------------------------------
Скорость текста в oGame Create

Вызов диалога NewTextBox() в entityActivateScript

Сам диалог и ответы прописываем на карте в Creation Code
В скрипте DialogueResponses описывается ветвление диалогов
(там же можно прописать увеличение уровня и т.д)
Не забудь сохранять статус квестов в SaveGame
-----------------------------------------------------------------------------------
Решение проблемы с бесконечным циклом диалогов:
	For anyone wondering about this issue in the future,
	I managed to fix it by changing the following line of code in the oText object:

	FROM
	if (keyboard_check_pressed(vk_space))

	TO
	if (oPlayer.keyActivate)

Исправлен баг сложно выбрать место для разговора с нпс
	About "1. Check for entity to activate", i found the dollowing script to work better. Because the origin of sPlayer is center bottom and sprite for entities are top left. They key point is to remove 8 pixels on "Y" :
		var _activateX = lengthdir_x(8, direction);	
		var _activateY = lengthdir_y(8, direction);
		activate = instance_position(x+_activateX, y-8+_activateY, pEntity);
		
Исправлена ошибка в 11 эпизоде
	Hey all, I kept having a problem when I would try to talk to the npc a second time (i.e. I talked to them once and the first conversation worked, then it would crash on the second try). The error would be something like 'unable to convert string "" to number'. This is because instead of copying argument[2] into responses, you are just making responses point to argument[2]. To fix this, you can replace 'responses = argument[2]' with the code below.

	var _array=argument[2];

	for(var _i=0;_i<array_length(_array)  ;_i++)
	{
	 responses[_i]=_array[_i];
	}


	I hope this helps

	
--------------------------------------------------
переменные сущности
	entityNPC -если нпс то он будет поворичиватся к нам
	entityShadow - если тень
	z - высота от тени(рисуем выше. зффект прыжка или т п)
	entityHitScript - сценарий при аттаке на сущьность(entityHitSolid / EntityHitDestroy)
	entityFragmentCount - кол-во осколков
	entityFragment - какие будут осколки (oFragPlant)
	в entityActivateScript можно вызывать диалог (NewTextBox)
	или делать предметы переносимыми(ActivateLiftable)
	entityThrowBreak - разбивается ли предмет при броске
	entityThrowDistance - дистанция на которую можем бросить предмет
	entityHookable  
			1 - подтягиваем этот пердмет
			2 - притягиваемся к этому предмету
			0 - предмет ни притягивается ни притягивает
	entitySlow - будем ли мы замедлятся при прохождении через предмет
	entitySlowSpeed - на сколько замедляется

----------------------------------------------------
переменные врагов
enemyWanderDistance  - дистанция блуждания
enemySpeed - скорость врага
enemyAggroRadius - радиус с которого враг начинает агрессию
enemyAttackRadius - радиус аттаки
enemyHP - жизни
enemyForceTouch - отброс игрока расстояние
enemyDamageTouch - урон по игроку
--------------------------------------------------
переменные осколков oFragment
	bounceCount - кол-во отскоков

------------------------------------------------------
дополнительно сделал рисовку восклицательного знака если есть что активировать
	(в игроке в создании переменная readyMess по умолчанию выкл.
	если она активируется то рисуем. туда же надо добавить звук)
	
--------------------------------------------------------------
		КАК СДЕЛАТЬ РАСЧЛЕНЁНКУ
создаём обьект кидаем туда спрайт расчленёнки (пример sFragPlant )
родитель у данного обьекта будет oFragment
в переменных настраиваем параметры расчленёнки
а в переменных самого врага (родитель у него должен быть pEntity)
прописываем переменные кол-во кусков расчлинения и фрагменты расчленёнки
пример как сделан обьект oPlant

-----------------------------------------------
	ЭФФЕКТ ПЕРЕХОДА ИЗ КОМНАТЫ В КОМНАТУ
в макросах параметры а именно скорость эффекта перехода

----------------------------------------------------------

функция урона по игроку - HurtPlayer
далее просто в коллизии с игроком пишем эту функцию с аргументами (пример есть в pEnemy)

------------------------------------------------------
			ПРЕДМЕТЫ
в oBomb Create параметр bombTickRate определяет таймер взрыва
(и вообще на карте в create code можно переопределить отдельно для каждого экземпляра
любые параметры и спрайты)
- урон от бомбы прописываем в oGame Create
- там же хилл от аптечки
- использование предметов описано в PlayerStateFree,  UseItemsFunsc а прописываются сами предметы
в MACROS и oGame Create
- также в PurchaseItem есть описание каждого предмета

		ВЫПАДЕНИЕ ПРЕДМЕТОВ
- во врагах траве и др предметов в create в entityDropList пишем вероятность выпадения чего либо
---------------------------------------------------------------------
обьект oRockStrong не поднимается без силы
пока сила добавляется на R
























